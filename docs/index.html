<html>
<head><title>Bookmarklets</title></head>
<body>
<h1>Bookmarklets</h1>
<p>使いたいBookmarkletをブックマークバーにドラッグ</p>
<ul>
<li><a href="javascript:(async()=%3E%7Bconst%20r=(a,b,c)=%3Eb.split(%22.%22).reduce((e,f)=%3Ee&&e%5Bf%5D,a)??c,l=(a,b)=%3E%7Ba=new%20Blob(%5Ba%5D,%7Btype:%22text/plain%22%7D);const%20c=document.createElement(%22a%22);c.href=URL.createObjectURL(a);c.download=b;c.click()%7D,t=new%20DOMParser,u=async%20a=%3E%7Ba=await%20fetch(a).then(b=%3Eb.text());a=t.parseFromString(a,%22text/html%22).querySelector('script%5Btype=%22application/ld+json%22%5D').textContent;return%20JSON.parse(a)%7D;try%7Bif(console.log(%22%5Bmarklet%5D%20script%20starts%22),%22Bandcamp%22!==document.querySelector('meta%5Bname=%22generator%22%5D')?.content)alert(%22Download%20failed:%20this%20page%20is%20not%20generated%20by%20Bandcamp%22);else%7Bvar%20g=document.querySelector('script%5Btype=%22application/ld+json%22%5D').textContent,d=JSON.parse(g),m=d.track.itemListElement.map(a=%3E%60$%7Ba.position%7D.%20$%7Ba.item.name%7D%60),v=null!=document.querySelector(%22.lyricsRow%22),h=d.byArtist.name,k=d.name,w=d%5B%22@id%22%5D,x=m.join(%22%5Cn%22)??%22-%22,y=d.description??%22-%22,z=d.creditText??%22-%22,A=(new%20Date(d.datePublished)).toISOString().slice(0,10),B=d.copyrightNotice??%22-%22,C=d.keywords?d.keywords.join(%22,%20%22)??%22-%22:%22-%22,D=(a=%3E%7Blet%20b=%60%5Bname%5D%5Cn$%7Ba.name%7D%60;a.foundingLocation&&(b=b+%22%5Cn%5Cn%5Blocation%5D%5Cn%22+%60$%7Ba.foundingLocation.name%7D%60);a.description&&(b=b+%22%5Cn%5Cn%5Bdescription%5D%5Cn%22+a.description);a.mainEntityOfPage&&(b=b+%22%5Cn%5Cn%5Bwebsite%5D%5Cn%22+a.mainEntityOfPage.map(c=%3E%60*%20$%7Bc.name%7D%20($%7Bc.url%7D)%5Cn%60));return%20b%7D)(d.publisher),E=Array.from(document.querySelectorAll(%22.lyricsRow%22)).map(a=%3E%7Bconst%20b=Number(a.id.replace(%22lyrics_row_%22,%22%22));a=a.textContent.trim();return%60$%7Bm%5Bb-1%5D%7D%5Cn$%7Ba%7D%60%7D);g=h+%22%5Cn%22+k+%22%5Cn%22+w+%22%5Cn%5Cn%3CTrack%20list%3E%5Cn%22+x+%22%5Cn%5Cn%3CDescription%3E%5Cn%22+y+%22%5Cn%5Cn%3CCredits%3E%5Cn%22+z+%22%5Cn%5Cn%3CPublished%3E%5Cn%22+A+%22%5Cn%5Cn%3CLisence%3E%5Cn%22+B+%22%5Cn%5Cn%3CTags%3E%5Cn%22+C+%22%5Cn%5Cn%3CPublisher%3E%5Cn%22+D;v&&(g=g+%22%5Cn%5Cn%3CLyrics%20(In-page)%3E%5Cn%22+E.join(%22%5Cn%5Cn%22));l(g,%60$%7Bh%7D%20-%20$%7Bk%7D.txt%60);var%20n=d.track.itemListElement.map(a=%3E(%7Burl:a.item%5B%22@id%22%5D,title:%60$%7Ba.position%7D.%20$%7Ba.item.name%7D%60,lyrics:r(a,%22item.recordingOf.lyrics.text%22)%7D)),F=document.querySelectorAll(%22.info_link%22),p=Array.from(F).filter(a=%3Ea.textContent.includes(%22info%22)).map(a=%3E%60$%7Blocation.origin%7D$%7Ba.querySelector(%22a%22).getAttribute(%22href%22)%7D%60);if(n.some(a=%3Evoid%200!==a.lyrics)%7C%7C0!==p.length)%7Bconsole.log(%22%5Bmarklet%5D%20this%20album%20has%20some%20track%20info.%20let's%20download%20it%22);const%20a=await%20Promise.all(n.map(async%20c=%3E%7Blet%20e=c.title+%22%5Cn%22;if(p.includes(c.url))%7Bvar%20f=await%20u(c.url);const%20q=f.description;f=f.creditText;q&&(e+=%22%3CDescription%3E%5Cn%22+q+%22%5Cn%22);f&&(e+=%22%3CCredit%3E%5Cn%22+f+%22%5Cn%22)%7Dc.lyrics&&(e+=%22%3CLyrics%3E%5Cn%22+c.lyrics);return%20e%7D)),b=h+%22%20-%20%22+k+%22%5Cn%5Cn%22+a.join(%22%5Cn%5Cn%22);l(b,%60$%7Bh%7D%20-%20$%7Bk%7D%20Tracks.txt%60)%7Dconsole.log(%22%5Bmarklet%5D%20script%20finished!%22)%7D%7Dcatch(a)%7Balert(%22%5Bmarklet%5D%20Error!%22,a.message)%7D%7D)();">download-bandcamp-description</a></li>
</ul>
</body>
</html>