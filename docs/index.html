<html>
<head><title>Bookmarklets</title></head>
<body>
<h1>Bookmarklets</h1>
<p>使いたいBookmarkletをブックマークバーにドラッグ</p>
<ul>
<li><a href="javascript:(async()=%3E%7Bconst%20r=(b,a,d)=%3Ea.split(%22.%22).reduce((e,m)=%3Ee&&e%5Bm%5D,b)??d,n=(b,a)=%3E%7Bb=new%20Blob(%5Bb%5D,%7Btype:%22text/plan%22%7D);const%20d=document.createElement(%22a%22);d.href=URL.createObjectURL(b);d.download=a;d.click()%7D,t=new%20DOMParser,u=async%20b=%3E%7Bb=await%20fetch(b).then(a=%3Ea.text());b=t.parseFromString(b,%22text/html%22).querySelector('script%5Btype=%22application/ld+json%22%5D').textContent;return%20JSON.parse(b)%7D;try%7Bconsole.log(%22%5Bmarklet%5D%20script%20starts%22);const%20b=document.querySelector('script%5Btype=%22application/ld+json%22%5D').textContent,a=JSON.parse(b),d=a.track.itemListElement.map(c=%3E%60$%7Bc.position%7D.%20$%7Bc.item.name%7D%60);var%20h=a.byArtist.name,k=a.name,v=a%5B%22@id%22%5D,w=d.join(%22%5Cn%22),x=a.description,y=a.creditText,z=a.datePublished,A=a.copyrightNotice,B=a.keywords.join(%22,%20%22);n(h+%22%5Cn%22+k+%22%5Cn%22+v+%22%5Cn%5Cn%3CTrack%20list%3E%5Cn%22+w+%22%5Cn%5Cn%3CDescription%3E%5Cn%22+x+%22%5Cn%5Cn%3CCredits%3E%5Cn%22+y+%22%5Cn%5Cn%3CPublished%3E%5Cn%22+z+%22%5Cn%5Cn%3CLisence%3E%5Cn%22+A+%22%5Cn%5Cn%3CTags%3E%5Cn%22+B,%60$%7Bh%7D%20-%20$%7Bk%7D.txt%60);const%20e=a.track.itemListElement.map(c=%3E(%7Burl:c.item%5B%22@id%22%5D,title:%60$%7Bc.position%7D.%20$%7Bc.item.name%7D%60,lyrics:r(c,%22item.recordingOf.lyrics.text%22)%7D)),m=document.querySelectorAll(%22.info_link%22),p=Array.from(m).filter(c=%3Ec.textContent.includes(%22info%22)).map(c=%3E%60$%7Blocation.origin%7D$%7Bc.querySelector(%22a%22).getAttribute(%22href%22)%7D%60);if(e.some(c=%3Evoid%200!==c.lyrics)%7C%7C0!==p.length)%7Bconsole.log(%22%5Bmarklet%5D%20this%20album%20has%20some%20track%20info.%20let's%20download%20it%22);const%20c=await%20Promise.all(e.map(async%20f=%3E%7Blet%20l=f.title+%22%5Cn%22;if(p.includes(f.url))%7Bvar%20g=await%20u(f.url);const%20q=g.description;g=g.creditText;q&&(l+=%22%3CDescription%3E%5Cn%22+q+%22%5Cn%22);g&&(l+=%22%3CCredit%3E%5Cn%22+g+%22%5Cn%22)%7Df.lyrics&&(l+=%22%3CLyrics%3E%5Cn%22+f.lyrics);return%20l%7D)),C=h+%22%20-%20%22+k+%22%5Cn%5Cn%22+c.join(%22%5Cn%5Cn%22);n(C,%60$%7Bh%7D%20-%20$%7Bk%7D%20Tracks.txt%60)%7Dconsole.log(%22%5Bmarklet%5D%20script%20finished!%22)%7Dcatch(b)%7Balert(%22%5Bmarklet%5D%20Error!%22,b.message)%7D%7D)();">save-bandcamp-description</a></li>
</ul>
</body>
</html>
